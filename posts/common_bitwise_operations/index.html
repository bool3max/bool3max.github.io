<!DOCTYPE html>


<html lang="en-us" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Common bitwise operations - bool3max&#39;s blog</title>
<meta name="description" content="Personal blog">

<link rel="icon" type="image/x-icon" href="https://bool3max.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://bool3max.github.io/favicon.png">



    





    
    
    

    
        <link rel="stylesheet" href="https://bool3max.github.io/css/style.c4de52a18529073577f6f0d063462e0080e046e20d809d2b9540d5f6c11ad4c5.css" integrity="sha256-xN5SoYUpBzV39vDQY0YuAIDgRuINgJ0rlUDV9sEa1MU=">
    







<meta property="og:title" content="Common bitwise operations" />
<meta property="og:description" content="A short reference listing some of the common bitwise operations that I document as I encounter them
  Create a mask with a single set bit  (1 &lt;&lt; k) can be used to create a mask where a single k &#43; 1-th bit is set.
 Extracting bits  Say we wanted to extract the highest 3 bits of a single byte (0bxxxxxxxx). We create a bitmask with those bits set to 1s, and all other bits to 0s, and we AND the two values together:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bool3max.github.io/posts/common_bitwise_operations/" />
<meta property="article:published_time" content="2020-12-17T20:52:23+01:00" />
<meta property="article:modified_time" content="2020-12-17T20:52:23+01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Common bitwise operations"/>
<meta name="twitter:description" content="A short reference listing some of the common bitwise operations that I document as I encounter them
  Create a mask with a single set bit  (1 &lt;&lt; k) can be used to create a mask where a single k &#43; 1-th bit is set.
 Extracting bits  Say we wanted to extract the highest 3 bits of a single byte (0bxxxxxxxx). We create a bitmask with those bits set to 1s, and all other bits to 0s, and we AND the two values together:"/>









    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <h1 class="site-title">
    <a href="/">bool3max&#39;s blog</a>
</h1>

    <nav>
        
        
        <a class="" href="https://github.com/bool3max/" title="GitHub">GitHub</a>
        
        <a class="" href="https://bool3max.github.io/posts/" title="Archive">Archive</a>
        
    </nav>


            
        </header>
        <main id="main" tabindex="-1"> 
            
    
    
    <article class="post">
        <header class="post-header">
            <h1 class="post-title draft">Common bitwise operations</h1>
        </header>
        <div class="content">
            <blockquote>
<p>A short reference listing some of the common bitwise operations that I document as I encounter them</p>
</blockquote>
<ul>
<li><strong>Create a mask with a single set bit</strong></li>
</ul>
<p><code>(1 &lt;&lt; k)</code> can be used to create a mask where a single <code>k + 1</code>-th bit is set.</p>
<ul>
<li><strong>Extracting bits</strong></li>
</ul>
<p>Say we wanted to extract the highest 3 bits of a single byte (0b<strong>xxx</strong>xxxxx). We create a bitmask with those bits set to 1s, and all other bits to 0s, and we AND the two values together:</p>
<pre><code>mask = 0xEO (0b11100000)
extracted = value &amp; mask
</code></pre><p>Explanation: since the highest 3 bits in the mask are set to one, respective bits in the value will remain ones, while zeroes will remain zeroes. Since all other bits are irrelevant, our mask has them at all 0s, so that the value&rsquo;s bits don&rsquo;t interfere.</p>
<ul>
<li><strong>Setting bits</strong></li>
</ul>
<p>Say we wanted to <strong>set</strong> the first and fifth bits of a byte. We create a mask where only those two bits are set (others are zeroes) and we OR it against our value:</p>
<pre><code>mask = 0x11 (0b00010001)
value |= mask
</code></pre><p>Explanation: the respective zeroes in the original value become ones (obvious), while all other values remain the same (if they&rsquo;re zeroes they remain zeroes since they&rsquo;re matched against the zeroes in the mask - same for ones).</p>
<ul>
<li><strong>Clearing bits</strong></li>
</ul>
<p>Say we wanted to <strong>unset</strong>/<strong>clear</strong> the first and fifth bits of a byte. We create a bit mask where those bits are zeroes, and the rest are ones, and we AND it over the original value:</p>
<pre><code>mask = 0x11 (0b11101110)
value &amp;= mask
</code></pre><p>If we&rsquo;re dealing with a <em>single bit</em> here, we can use this idiom to quickly create the bitmask on the right-hand side of the assignment:</p>
<pre><code>mask = ~(1 &lt;&lt; 4)
value &amp;= mask

// or even shorter

value &amp;= ~(1 &lt;&lt; 4)
</code></pre><ul>
<li><strong>Flipping bits</strong></li>
</ul>
<p>If we want to, for example, flip the first and third bits of a byte, we create a mask where those bits are ones and others are zeroes, and we XOR it againast the original value:</p>
<pre><code>mask = 0x5 (0b00000101)
value ^= mask
</code></pre><p>Explanation: XOR produces 0 if both bits are the same, and 1 if they&rsquo;re different. Zeroes become ones (0 ^ 1 = 1), and ones become zeroes (1 ^ 1 = 0), and all other bits retain their value (obvious).</p>

        </div>
        


<div class="post-info">
    
        <div class="post-date">2020-12-17</div>
    
    <div class="post-taxonomies">
        
            
    </div>
</div>

    </article>

    

    


        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© Bogdan Mitrović, 2020<br>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
            </p>  
        </div> 

        

    



    <button class="theme-switcher">
        Dark theme
    </button>

    <script>
    const STORAGE_KEY = 'user-color-scheme'
    const defaultTheme = "dark"

    let currentTheme
    let switchButton
    let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

    const autoChangeScheme = e => {
        currentTheme = e.matches ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', currentTheme)
        changeButtonText()
    }

    document.addEventListener('DOMContentLoaded', function() {
        switchButton = document.querySelector('.theme-switcher')
        currentTheme = detectCurrentScheme()
        if (currentTheme == 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark')
        }
        if (currentTheme == 'auto') {
            autoChangeScheme(autoDefinedScheme);
            autoDefinedScheme.addListener(autoChangeScheme);
        }
        changeButtonText()
        switchButton.addEventListener('click', switchTheme, false)
    })

    function detectCurrentScheme() {
        if (localStorage.getItem(STORAGE_KEY)) {
            return localStorage.getItem(STORAGE_KEY)
        } 
        if (defaultTheme) {
            return defaultTheme
        } 
        if (!window.matchMedia) {
            return 'light'
        } 
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return 'dark'
        }
        return 'light'
    }

    function changeButtonText()
    {   
        switchButton.textContent = currentTheme == 'dark' ?  "Light theme" : "Dark theme"
    }

    function switchTheme(e) {
        if (currentTheme == 'dark') {
            localStorage.setItem(STORAGE_KEY, 'light')
            document.documentElement.setAttribute('data-theme', 'light')
            currentTheme = 'light'
        } else {
            localStorage.setItem(STORAGE_KEY, 'dark')
            document.documentElement.setAttribute('data-theme', 'dark')
            currentTheme = 'dark'
        }
        changeButtonText()
    }
    </script>
   
    </div>
</footer>

        
    </div>
</body>
</html>
