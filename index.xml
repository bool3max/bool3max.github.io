<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>bool3max&#39;s blog</title>
    <link>https://bool3max.github.io/</link>
    <description>bool3max&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 05 Nov 2020 00:32:02 +0100</lastBuildDate>
    
    <atom:link href="https://bool3max.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Iterators and Generators in Python3</title>
      <link>https://bool3max.github.io/posts/python_generators/</link>
      <pubDate>Thu, 05 Nov 2020 00:32:02 +0100</pubDate>
      
      <guid>https://bool3max.github.io/posts/python_generators/</guid>
      <description>&lt;p&gt;Recently I needed a way to infinitely loop over a list in Python. Traditionally, this is extremely easy to do with simple indexing if the size of the list is known in advance. For example, an approach could look something like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;l &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;]
i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; True:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(l[i])
    i &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; len(l):
        i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Eventually I settled on a an inbuilt approach using the &lt;code&gt;itertools&lt;/code&gt; module from the standard library. Consequently the code became a lot cleaner:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; itertools
l &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;]

&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; itertools&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cycle(l):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;But for the fun of it, I decided to try to re-implement &lt;code&gt;itertools.cycle&lt;/code&gt; myself, and in order to do that, I first have to understand how generators work in &lt;code&gt;python3&lt;/code&gt;. I already do, but I will explain it here, after which I will demonstrate the &lt;code&gt;itertools.cycle&lt;/code&gt; re-implementation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Both iterators and generators have their own short sections in the offical &lt;a href=&#34;https://docs.python.org/3/tutorial/classes.html#iterators&#34;&gt;python3 tutorial&lt;/a&gt;. This post is my own explanation of them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;iterators&#34;&gt;Iterators&lt;/h1&gt;
&lt;p&gt;Iterators are objects that define a &lt;strong&gt;&lt;code&gt;__next__&lt;/code&gt;&lt;/strong&gt; method that is called every time the next value of the iterable is desired. They can be &lt;em&gt;iterared&lt;/em&gt; over, yielding their members one by one.&lt;/p&gt;
&lt;p&gt;An object is said to be iterable if it defines an &lt;strong&gt;&lt;code&gt;__iter__&lt;/code&gt;&lt;/strong&gt; method that returns an above mentioned &lt;em&gt;&lt;strong&gt;iterator&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It can be a little confusing. Think of it like this: strings are &lt;em&gt;iterable&lt;/em&gt; (able to be iterated over) because their base class (&lt;strong&gt;&lt;code&gt;str&lt;/code&gt;&lt;/strong&gt;) defines an &lt;strong&gt;&lt;code&gt;__iter__&lt;/code&gt;&lt;/strong&gt; method that returns an &lt;strong&gt;iterator&lt;/strong&gt; object which has a &lt;strong&gt;&lt;code&gt;__next__&lt;/code&gt;&lt;/strong&gt; method.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, in the following code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;: 
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;, behind the scenes, &lt;strong&gt;&lt;code&gt;for&lt;/code&gt;&lt;/strong&gt; calls &lt;code&gt;iter()&lt;/code&gt; on &lt;code&gt;&amp;quot;abc&amp;quot;&lt;/code&gt;, which in turn calls &lt;strong&gt;&lt;code&gt;&amp;quot;abc&amp;quot;.__iter__()&lt;/code&gt;&lt;/strong&gt;. Since &lt;strong&gt;&lt;code&gt;&amp;quot;123&amp;quot;&lt;/code&gt;&lt;/strong&gt; is of type &lt;strong&gt;&lt;code&gt;str&lt;/code&gt;&lt;/strong&gt;, a class that defines the &lt;code&gt;__iter__&lt;/code&gt; method, that one is called, and an iterator object is returned.&lt;/p&gt;
&lt;p&gt;Then, &lt;strong&gt;&lt;code&gt;for&lt;/code&gt;&lt;/strong&gt; simply calls the &lt;strong&gt;&lt;code&gt;__next__&lt;/code&gt;&lt;/strong&gt; method on that interator object, passing its return value to you in the form of a variable, until &lt;strong&gt;&lt;code&gt;__next__&lt;/code&gt;&lt;/strong&gt; raises a &lt;strong&gt;&lt;code&gt;StopIteration&lt;/code&gt;&lt;/strong&gt; exception, at which point the loop stops.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It actually calls &lt;code&gt;next()&lt;/code&gt; on the iterator object, which in turn calls its &lt;code&gt;__next__&lt;/code&gt; method. The &lt;code&gt;next()&lt;/code&gt; builtin is handy because it provides another parameter that can be used to specify a value to be returned if the iterator object is already exahusted.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;example&#34;&gt;Example&lt;/h3&gt;
&lt;p&gt;We can see this in action:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; string &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; iterator &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; string&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__iter__()

&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(iterator&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__next__())
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(iterator&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__next__())
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(iterator&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__next__())
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;c&amp;#39;&lt;/span&gt;

&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(iterator&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__next__())
Traceback (most recent call last):
  File &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;stdin&amp;gt;&amp;#34;&lt;/span&gt;, line &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;module&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;StopIteration&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As we can see, when we exhaust the iterator, a &lt;code&gt;StopIteration&lt;/code&gt; exception is raised.&lt;/p&gt;
&lt;p&gt;Using the built-in &lt;strong&gt;&lt;code&gt;next()&lt;/code&gt;&lt;/strong&gt; function we have a greater degree of control: we can designate a value to be returned in the case where &lt;code&gt;__next__&lt;/code&gt; would exhaust the object (and raise an exception):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; string &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; iterator &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; string&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__iter__()

&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(next(iterator, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(next(iterator, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;b&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(next(iterator, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;c&amp;#39;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(next(iterator, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))
&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(next(iterator, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))
&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Instead of directly calling &lt;code&gt;object.__iter__()&lt;/code&gt;, you should probably use the built-in &lt;a href=&#34;https://docs.python.org/3/library/functions.html#iter&#34;&gt;&lt;strong&gt;&lt;code&gt;iter()&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; method, as it has a little added functionality depending on the use case, but ultimately does the same thing (iterate over an object, that is).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;re-implementing-itertoolscycle-using-iterators&#34;&gt;Re-implementing &lt;strong&gt;&lt;code&gt;itertools.cycle&lt;/code&gt;&lt;/strong&gt; using iterators&lt;/h2&gt;
&lt;p&gt;Knowing all this, we can write a custom class that can infinitely iterate over another iterable:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;InfiniteIterable&lt;/span&gt;:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __init__(self, original):
        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;original_iterable &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; original
        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;len &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; len(original)
        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __iter__(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; self
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;__next__&lt;/span&gt;(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; (self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;len &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;):
            self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

        ret &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;original_iterable[self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;i]
        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;i &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; ret

&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; InfiniteIterable(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since we never raise a &lt;strong&gt;&lt;code&gt;StopIteration&lt;/code&gt;&lt;/strong&gt; exception from our &lt;code&gt;__next__&lt;/code&gt; method, the iterator never halts!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Since our custom class is an iterable object in and of itself (i.e. it defines an &lt;code&gt;__next__&lt;/code&gt; method), &lt;code&gt;__iter__&lt;/code&gt; just returns &lt;code&gt;self&lt;/code&gt;! But if we didn&amp;rsquo;t want to implement iteration logic from within this class, we could make &lt;code&gt;__iter__&lt;/code&gt; return an instance of some other class.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;generators&#34;&gt;Generators&lt;/h1&gt;
&lt;p&gt;Generators are just simpler, syntatic-sugary ways to quickly create iterators from within regular functions. That&amp;rsquo;s it. When you want to &amp;ldquo;return&amp;rdquo; the next value, you use the &lt;strong&gt;&lt;code&gt;yield&lt;/code&gt;&lt;/strong&gt; statement. When your function returns, the generator raises &lt;strong&gt;&lt;code&gt;StopIteration&lt;/code&gt;&lt;/strong&gt; itself, making the proccess of writing complex iterators really simple.&lt;/p&gt;
&lt;h2 id=&#34;implementing-infiniteiterable-using-generators&#34;&gt;Implementing &lt;strong&gt;&lt;code&gt;InfiniteIterable&lt;/code&gt;&lt;/strong&gt; using generators&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;InfiniteIterable&lt;/span&gt;(original_iterable):
    i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; True:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;yield&lt;/span&gt; original_iterable[i]
        i &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; (len(original_iterable) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;):
            i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; InfiniteIterable(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abc&amp;#34;&lt;/span&gt;):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(n)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This accomplishes the exact same task as manually writing the iterable does, but in a more readable manner. It is essentially just syntatic sugar.&lt;/p&gt;
&lt;h3 id=&#34;a-caveat&#34;&gt;A caveat&lt;/h3&gt;
&lt;p&gt;In these two implementations, I accessed members using the subscript notation &lt;strong&gt;&lt;code&gt;[]&lt;/code&gt;&lt;/strong&gt; (so me calling the argument &amp;ldquo;&lt;code&gt;original_iterable&lt;/code&gt;&amp;rdquo; is a bit misleading), which is implemented using the &lt;strong&gt;&lt;code&gt;__getitem__&lt;/code&gt;&lt;/strong&gt; method under the hood. Therefore, if the original argument does not define this method, my implementation would not work. Most of the builtin types do, so it&amp;rsquo;s not a problem.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Languages versus their implementations</title>
      <link>https://bool3max.github.io/posts/languages_versus_implementations/</link>
      <pubDate>Fri, 16 Oct 2020 14:23:54 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/languages_versus_implementations/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Python&lt;/strong&gt; is a programming language. It is nothing more but one large document of text and code examples (a &lt;em&gt;standard&lt;/em&gt;) that describes exactly how the language is to behave. You can&amp;rsquo;t run it, download it, or execute it. That&amp;rsquo;s it, it&amp;rsquo;s just text.&lt;/p&gt;
&lt;p&gt;The latest edition of it is up on the official Python website as the &lt;a href=&#34;https://docs.python.org/3/reference/index.html&#34;&gt;&lt;strong&gt;The Python Language Reference&lt;/strong&gt;&lt;/a&gt;. As Python also consists of a standard library of functions, a document that describes how the modules and their respective functions are to behave is also readily available as
&lt;a href=&#34;https://docs.python.org/3/library/index.html&#34;&gt;&lt;strong&gt;The Python Standard Library&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;CPython&lt;/strong&gt; on the other hand is the reference implementation of &lt;strong&gt;Python&lt;/strong&gt;. It is an actual piece of software (written in C) that you can download and execute for platforms that support it. It&amp;rsquo;s an interpreter that runs code written in Python as described by the &amp;lsquo;Python Language Rererence&amp;rsquo;, to which it conforms.&lt;/p&gt;
&lt;p&gt;You can browse its source code &lt;a href=&#34;https://github.com/python/cpython&#34;&gt;here&lt;/a&gt; (&lt;a href=&#34;https://www.python.org/downloads/source/&#34;&gt;or download it as a tarball here&lt;/a&gt;), and download it for your respective platform &lt;a href=&#34;https://www.python.org/downloads/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Other implementations of the Python language exist, too. Examples include IronPython, Jython, PyPy, and others. They all conform to the standard to some degree, and they can all execute valid Python code, but they do it in different ways (&lt;em&gt;Jython&lt;/em&gt; is an implementation that compiles Python code to Java bytecode and executes it in a JVM).&lt;/p&gt;
&lt;h1 id=&#34;another-example&#34;&gt;Another example&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;C&lt;/strong&gt; is a programming language. &lt;em&gt;Its&lt;/em&gt; standard is published by ISO and ANSI. Again, it is nothing but a large document full of text and code examples, that, again, describes all of the internals of the language as well as how it should behave, in great detail. Unfortunately it is copyrighted and ISO requries that you pay for it (&lt;a href=&#34;https://softwareengineering.stackexchange.com/questions/326249/why-isnt-the-c-standard-free&#34;&gt;&lt;em&gt;and here&amp;rsquo;s why&lt;/em&gt;&lt;/a&gt;), however drafts can be commonly found on the internet.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s the &lt;a href=&#34;https://port70.net/~nsz/c/c11/n1570.html&#34;&gt;&lt;strong&gt;N1570 draft of the C11 standard&lt;/strong&gt;&lt;/a&gt; (it is absolutely &lt;em&gt;massive&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Implementations of the C standard are compilers. Obvious examples include &lt;strong&gt;gcc&lt;/strong&gt;, &lt;strong&gt;clang&lt;/strong&gt;, or &lt;strong&gt;MSVC&lt;/strong&gt;. (&lt;strong&gt;gcc&lt;/strong&gt; isn&amp;rsquo;t &lt;em&gt;actually&lt;/em&gt; a proper implementation of the C standard as it doesn&amp;rsquo;t supply a C standard library implementation (which is a part of the standard), however it is usually paired with &lt;strong&gt;glibc&lt;/strong&gt;, the &lt;a href=&#34;https://www.gnu.org/software/libc/&#34;&gt;GNU C Library&lt;/a&gt;). They take C code and compile it to machine code that can then be properly executed.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Python3 OOP gotchas</title>
      <link>https://bool3max.github.io/posts/python3_oop_guide/</link>
      <pubDate>Mon, 12 Oct 2020 16:22:05 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/python3_oop_guide/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;This is not a tutorial, but rather a personal document that I write for myself in order to cement the knowledge and explain &amp;ldquo;tricky&amp;rdquo; concepts and gotchas when it comes to OOP and classes in &lt;code&gt;python3&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Useful resources:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.python.org/3/tutorial/classes.html&#34;&gt;Official python &amp;lsquo;Classes&amp;rsquo; tutorial&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.python.org/3/reference/datamodel.html&#34;&gt;Data model section of the official python &amp;lsquo;Language Reference&amp;rsquo;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://realpython.com/python-super/#an-overview-of-pythons-super-function&#34;&gt;&amp;ldquo;Supercharge your classes with Python super() article on realpython.org&amp;rdquo;&lt;/a&gt; - &lt;em&gt;a really good read&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;how-does-self-actually-work&#34;&gt;How does &lt;code&gt;self&lt;/code&gt; actually work?&lt;/h1&gt;
&lt;p&gt;Consider the following class definition:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Dog&lt;/span&gt;:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; __init__(self, name):
        self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; name

    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;speak&lt;/span&gt;(self, age):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; f&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;My name is {self.name} and I am {age} years old.&amp;#34;&lt;/span&gt;

jake &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Dog(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Jake&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(jake&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;speak(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))

&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;My name is Jake and I am 3 years old.&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When we call &lt;code&gt;jake.speak&lt;/code&gt;, the &lt;code&gt;self&lt;/code&gt; arguement is &amp;ldquo;automatically&amp;rdquo; passed into the method because the method belongs to an already instantiated instance of a class.&lt;/p&gt;
&lt;p&gt;We can achieve the same effect by instantiating &lt;code&gt;jake&lt;/code&gt;, then calling &lt;code&gt;Dog.speak&lt;/code&gt; directly while passing the value of the &lt;code&gt;self&lt;/code&gt; argument manually, like so:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;jake &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Dog(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jake&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(Dog&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;speak(jake, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;))

&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;My name is Jake and I am 3 years old.&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The same is true for the &lt;code&gt;__init__&lt;/code&gt; method, which is a method like any other, except that it is called automatically when instantiating new instances of the class.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; types

jake &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; types&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SimpleNamespace()
Dog&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__init__(jake, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Jake&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(jake&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;name)

&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Jake&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Of course this is undesirable, as now we cannot access other methods defined in the class (e.g. &lt;code&gt;speak&lt;/code&gt;).&lt;/p&gt;
&lt;h1 id=&#34;super-and-method-resolution-order-mro&#34;&gt;&lt;code&gt;super()&lt;/code&gt; and Method Resolution Order (MRO)&lt;/h1&gt;
&lt;p&gt;Method Resolution Order (&lt;em&gt;MRO&lt;/em&gt;) is the order in which method lookup is performed by the interpreter for an instance of a given class.&lt;/p&gt;
&lt;p&gt;Defined classes have an &lt;code&gt;__mro__&lt;/code&gt; attribute that results in a tuple describing the MRO.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Instances don&amp;rsquo;t have this method defined, but this can very easily be circumvented using the special &lt;em&gt;&lt;code&gt;instance&lt;/code&gt;&lt;/em&gt;.&lt;code&gt;__class__&lt;/code&gt; attribute, which returns the reference of the class that the instance belongs to:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(instance&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__class__&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__mro__)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;Examine the following code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;A&lt;/span&gt;:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mymethod&lt;/span&gt;(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mymethod of class A&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;(A):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mymethod&lt;/span&gt;(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mymethod of class B&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;C&lt;/span&gt;(B):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mymethod&lt;/span&gt;(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mymethod of class C&amp;#34;&lt;/span&gt;
    
instance &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; C()
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(f&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C.__mro__ = {C.__mro__}&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(instance&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mymethod())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This then logs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;C&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__mro__ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;__main__&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;__main__&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;B&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;__main__&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;A&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;object&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;)&lt;/span&gt;
mymethod of &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;C&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This means that any method lookups done on &lt;em&gt;instances&lt;/em&gt; of class C will first be done on methods defined class C, then class B, then class A, and then in the &amp;ldquo;base&amp;rdquo; &lt;em&gt;object&lt;/em&gt; class, &lt;strong&gt;stopping at the first class in which the desired method is found&lt;/strong&gt;, because every class in the &amp;ldquo;chain&amp;rdquo; inherits the next one (C inherits B, which inherits A which by default inherits &lt;code&gt;object&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;In our case, the &lt;em&gt;&lt;strong&gt;mymethod&lt;/strong&gt;&lt;/em&gt; method was in fact defined in the first class listed in the &lt;code&gt;__mro__&lt;/code&gt; tuple, so naturally, it is &lt;code&gt;C.mymethod&lt;/code&gt; that gets called in the end.&lt;/p&gt;
&lt;p&gt;If we remove the &lt;code&gt;mymethod&lt;/code&gt; method from the &lt;code&gt;C&lt;/code&gt; class, &lt;strong&gt;the MRO will stay the same&lt;/strong&gt;, however since &lt;code&gt;mymethod&lt;/code&gt; doesn&amp;rsquo;t exist inside of the &lt;code&gt;C&lt;/code&gt; class anymore, it will instead &amp;ldquo;come&amp;rdquo; from the next one in the MRO chain that it &lt;em&gt;is&lt;/em&gt; defined in, in this case the &lt;code&gt;B&lt;/code&gt; class.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;C&lt;/span&gt;(B):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;pass&lt;/span&gt;

instance &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; C()
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(f&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C.__mro__ = {C.__mro__}&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(instance&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mymethod())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;this logs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;C&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;__mro__ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;__main__&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;__main__&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;B&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;__main__&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;A&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;, &amp;lt;class &amp;#39;&lt;/span&gt;object&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;gt;)&lt;/span&gt;
mymethod of &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;super-explained&#34;&gt;&lt;code&gt;super()&lt;/code&gt; explained&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&#34;https://docs.python.org/3/library/functions.html#super&#34;&gt;official super() builtin documentation&lt;/a&gt; explains its use and functionality pretty well, but to explain it using an example: let&amp;rsquo;s say that we wanted the &lt;code&gt;mymethod&lt;/code&gt; method in the C class to return the same string returned by the &lt;code&gt;mymethod&lt;/code&gt; method of the A class, with an additional &lt;code&gt;!&lt;/code&gt; appended
at the end.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Obviously that is a simplified example, in the real world &lt;code&gt;A.mymethod&lt;/code&gt; could execute some long, complicated logic that we wish to re-implement (alongside some &lt;em&gt;other&lt;/em&gt; logic) inside of &lt;code&gt;C.mymethod&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Inside of the &lt;code&gt;C&lt;/code&gt; class we can accomplish this by calling &lt;code&gt;super()&lt;/code&gt; which creates a &lt;em&gt;proxy object&lt;/em&gt; that delegeates all method calls to the appropriate class:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;C&lt;/span&gt;(B):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mymethod&lt;/span&gt;(self):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; super(B, self)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mymethod() &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;!!!&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The output will therefore be: &lt;code&gt;mymethod of class A!!!&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;super()&lt;/code&gt; is more useful when you provide no arguments to it however, as it automatically goes up the hierarchy and provides you with the first class that defines the appropriate method (or attribute, as &lt;code&gt;super()&lt;/code&gt; works for attribute lookups as well).&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Why I prefer fish over bash for scripting</title>
      <link>https://bool3max.github.io/posts/fish_scripting_over_bash/</link>
      <pubDate>Mon, 28 Sep 2020 15:45:48 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/fish_scripting_over_bash/</guid>
      <description>&lt;p&gt;Scripting with &lt;a href=&#34;https://github.com/fish-shell/fish-shell&#34;&gt;&lt;code&gt;fish&lt;/code&gt;&lt;/a&gt; is simple. It is readable. You don&amp;rsquo;t need to have deep experience with it in order to understand the syntax.&lt;/p&gt;
&lt;p&gt;Compared to &lt;code&gt;bash&lt;/code&gt;, it feels &lt;em&gt;intuitive&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;everything-is-a-builtin&#34;&gt;Everything is a builtin&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;builtins&lt;/code&gt; are commands that you call from the shell, but unlike regular commands that execute external binaries and spawn new processes, they are built right into the shell (e.g. &lt;code&gt;echo&lt;/code&gt;, &lt;code&gt;math&lt;/code&gt;, &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;count&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;The core syntax of &lt;code&gt;fish&lt;/code&gt; is very simple, and most all of the operations are done via calling builtins.&lt;/p&gt;
&lt;p&gt;Want to set a variable? Use the &lt;code&gt;set&lt;/code&gt; builtin. Want to declare a function? Use the &lt;code&gt;function&lt;/code&gt; builtin. Want perform some sort of calculation? Use the &lt;code&gt;math&lt;/code&gt; builtin. Want to find out what some other builtin does? Use the &lt;code&gt;help&lt;/code&gt; builtin.&lt;/p&gt;
&lt;p&gt;In fact, prior to &lt;code&gt;fish 3.0&lt;/code&gt;, even conditional command execution was done using &lt;code&gt;and&lt;/code&gt; and &lt;code&gt;or&lt;/code&gt; builtins (&lt;em&gt;unconditional&lt;/em&gt; command chaining is still done using the seimicolon &lt;code&gt;;&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ git commit; and git push
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(it still is, though support for &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; and &lt;code&gt;||&lt;/code&gt; syntax was added).&lt;/p&gt;
&lt;h3 id=&#34;string-replacement&#34;&gt;String replacement&lt;/h3&gt;
&lt;p&gt;In &lt;code&gt;bash&lt;/code&gt;, string replacement is done using the &lt;code&gt;${$text//pattern/replacement}&lt;/code&gt; syntax. For example, if you wanted to replace every instance of &lt;code&gt;&#39;foo&#39;&lt;/code&gt; with &lt;code&gt;&#39;bar&#39;&lt;/code&gt; in a certain text, you could do it like so:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;replaced_text&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;$text//foo/bar&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In &lt;code&gt;fish&lt;/code&gt;, however, this is done using the &lt;code&gt;string&lt;/code&gt; builtin:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;set replaced_text &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;string replace -a foo bar $text&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If it wasn&amp;rsquo;t for the variable name, newcomers would have absolutely no idea what the fuck was going on in the &lt;code&gt;bash&lt;/code&gt; version, whereas the &lt;code&gt;fish&lt;/code&gt; versions almost completely &amp;ldquo;spells out&amp;rdquo;
the entire operation.&lt;/p&gt;
&lt;h3 id=&#34;array-item-count&#34;&gt;Array item count&lt;/h3&gt;
&lt;p&gt;In &lt;code&gt;fish&lt;/code&gt;, getting the number of items in an array is done using the &lt;code&gt;count&lt;/code&gt; builtin:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;set N &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;count $array&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In &lt;code&gt;bash&lt;/code&gt;, the syntax is, to no surprise, more obscure:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;N&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${#&lt;/span&gt;args[@]&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;math&#34;&gt;Math&lt;/h3&gt;
&lt;p&gt;In &lt;code&gt;fish&lt;/code&gt;, mathematical operations are peformed using the &lt;code&gt;math&lt;/code&gt; builtin, and unlike in bash, they support decimal numbers as well as functions:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;3 + sqrt(4) = &amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;math &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; + &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sqrt(4)&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;

&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; + sqrt&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;4&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since &lt;code&gt;bash&lt;/code&gt; doesn&amp;rsquo;t support decimal operations nor mathematical functions, you&amp;rsquo;d have to call external processes to do the work for you.&lt;/p&gt;
&lt;p&gt;For someone who isn&amp;rsquo;t familiar with shell scripting, the &lt;code&gt;fish&lt;/code&gt; versions of these example operations are going to make much more sense at first (and probably second) glance.&lt;/p&gt;
&lt;p&gt;This philosophy makes scripts insanely &lt;em&gt;readable&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&#34;argument-substitution-is-more-intuitive&#34;&gt;Argument substitution is more intuitive&lt;/h2&gt;
&lt;p&gt;This was one of my first serious gripes back when I was first learning &lt;code&gt;bash&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s assume that &lt;code&gt;barg&lt;/code&gt; is a readily available program that simply prints its commandline arguments (as well as the number of them), to standard out, one per line:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ barg &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;

User arguments passed: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;

&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Parameter substition in &lt;code&gt;fish&lt;/code&gt; &lt;em&gt;makes sense&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Expanding a single variable results in a &lt;em&gt;&lt;strong&gt;single argument&lt;/strong&gt;&lt;/em&gt; on the commandline. For example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ set arg &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello there, you!&amp;#34;&lt;/span&gt;
$ barg $arg

User arguments passed: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

Hello there, you!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It is only if you pass in an array of &lt;em&gt;multiple values&lt;/em&gt;, that the resulting commandline ends up with multiple values, for example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ set args &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello there, you!&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;--some-long-option&amp;#34;&lt;/span&gt;
$ barg $args

User arguments passed: &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;

Hello there, you!
--some-long-option
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Again, it is intuitive and it makes sense.&lt;/p&gt;
&lt;p&gt;Now let&amp;rsquo;s take a look at the same examples, but in &lt;code&gt;bash&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ arg&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello there, you!&amp;#34;&lt;/span&gt;
$ barg $arg

User arguments passed: &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;

Hello
there,
you!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The source operand was split on spaces, and a single variable substitution resulted in &lt;em&gt;3&lt;/em&gt; different commandline arguments.&lt;/p&gt;
&lt;p&gt;To avoid this, you have to encapsulate substituion in double quotes (&lt;code&gt;&amp;quot; &amp;quot;&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ arg&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello there, you!&amp;#34;&lt;/span&gt;
$ barg &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$args&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;

User arguments passed: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

Hello there, you!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To me this makes no sense, however from a historical point of view I can see why it is: in &lt;code&gt;fish&lt;/code&gt;, declaring arrays of multiple values each of which expands to a signle value is easy, unlike in &lt;code&gt;bash&lt;/code&gt;, where, if you&amp;rsquo;d written something like &lt;code&gt;arguments=&amp;quot;-a -D --long-opt&amp;quot;&lt;/code&gt;, you would probably in fact &lt;em&gt;want&lt;/em&gt; it to expand to 3 different arguments.&lt;/p&gt;
&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;These are just some of the examples. The true strength of &lt;code&gt;fish&lt;/code&gt; lies in its power as an interactive shell - robust automatic completion, autosuggestions, configurability, colors, etc&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Understanding the ELF file structure</title>
      <link>https://bool3max.github.io/posts/elf/</link>
      <pubDate>Sun, 09 Aug 2020 18:54:26 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/elf/</guid>
      <description>&lt;p&gt;I recently took it upon myself to, at least at the surface level, understand how the ELF (&amp;quot;&lt;em&gt;Executable and Linkable Format&lt;/em&gt;&amp;quot;) works.
In order to do that, I set out to create a tiny python3 module for parsing (meta-)data out of ELF files.&lt;/p&gt;
&lt;p&gt;The result of that is &lt;a href=&#34;https://github.com/bool3max/p3elf&#34;&gt;&lt;strong&gt;p3elf&lt;/strong&gt;&lt;/a&gt;, during the development of which I familiarized myself with ELF, binary IO in python, as well as &lt;code&gt;setuptools&lt;/code&gt; and publishing python packages on &lt;a href=&#34;https://pypi.org/project/p3elf&#34;&gt;PyPI&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This post will mainly serve as a short future reference of the structure of ELF files and will most likely be updated in the future.&lt;/p&gt;
&lt;h1 id=&#34;structure&#34;&gt;Structure&lt;/h1&gt;
&lt;p&gt;The &lt;a href=&#34;https://en.wikipedia.org/wiki/Executable_and_Linkable_Format&#34;&gt;Executable and Linkable Format&lt;/a&gt; Wikipedia article is an excellent reference for the structure and fields of ELF files, though I found it to be a little ambiguous in certain places. Some concepts are not completely obvious unless you have prior experience with ELF.&lt;/p&gt;
&lt;h2 id=&#34;file-header&#34;&gt;File header&lt;/h2&gt;
&lt;p&gt;Every ELF file begins with a &lt;strong&gt;file header&lt;/strong&gt;. It contains general metadata about the binary, and its size is known in advance - it is &lt;code&gt;64&lt;/code&gt; bytes long on 64bit binaries, and &lt;code&gt;56&lt;/code&gt; bytes long on 32bit ones.&lt;/p&gt;
&lt;p&gt;Notable fields here include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EI_CLASS&lt;/code&gt;&lt;/strong&gt;: denotes the &lt;em&gt;byteclass&lt;/em&gt; of the binary (&lt;code&gt;0x1&lt;/code&gt;: 32bit, &lt;code&gt;0x2&lt;/code&gt;: 64bit)
&lt;ul&gt;
&lt;li&gt;this field is particularly important because the lengths and offsets of many other fields in the file depend on it&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EI_DATA&lt;/code&gt;&lt;/strong&gt;: denotes the &lt;em&gt;endianness&lt;/em&gt; of the binary
&lt;ul&gt;
&lt;li&gt;important for the same reasons as EI_CLASS&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EI_OSABI&lt;/code&gt;&lt;/strong&gt;: denotes the &lt;em&gt;ABI&lt;/em&gt;, but is often set to &lt;code&gt;0x0&lt;/code&gt; (&lt;em&gt;System V&lt;/em&gt;) regardless of the actual platform&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;E_TYPE&lt;/code&gt;&lt;/strong&gt;: type of object file (executable, relocatable, etc.)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;E_MACHINE&lt;/code&gt;&lt;/strong&gt;: denotes the target ISA, e.g. &lt;code&gt;0x3E&lt;/code&gt; for &lt;code&gt;&#39;amd64&#39;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;E_PHOFF&lt;/code&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;code&gt;E_SHOFF&lt;/code&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;code&gt;E_PHOFF&lt;/code&gt;&lt;/strong&gt;,  &lt;strong&gt;&lt;code&gt;E_SHNUM&lt;/code&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;code&gt;E_PHNUM&lt;/code&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;code&gt;E_SHENTSIZE&lt;/code&gt;&lt;/strong&gt;, &lt;strong&gt;&lt;code&gt;E_PHENTSIZE&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;offsets, counts, and sizes of &lt;strong&gt;section headers&lt;/strong&gt; and &lt;strong&gt;program headers&lt;/strong&gt; - more on these later&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;segments--program-headers&#34;&gt;Segments &amp;amp; Program headers&lt;/h2&gt;
&lt;p&gt;Every ELF file is divided into &lt;em&gt;segments&lt;/em&gt;, which are further divided into one or more &lt;em&gt;sections&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Every program header corresponds to one segment and provides info and metadata about it. Because of that, we know the number of segments in advance - it&amp;rsquo;s the &lt;strong&gt;&lt;code&gt;E_PHNUM&lt;/code&gt;&lt;/strong&gt; field in the file header.&lt;/p&gt;
&lt;p&gt;The first segment is the &amp;ldquo;program header table&amp;rdquo; - i.e. the segment that contains all of the program headers (which in turn describe other segments).&lt;/p&gt;
&lt;p&gt;The first program header (&lt;code&gt;PT_TYPE&lt;/code&gt; 0x00000006, i.e. &lt;code&gt;PT_PHDR&lt;/code&gt;) (the one that describes the entire program header table segment) is found at offset &lt;strong&gt;&lt;code&gt;E_PHOFF&lt;/code&gt;&lt;/strong&gt; and is &lt;strong&gt;&lt;code&gt;E_PHENTSIZE&lt;/code&gt;&lt;/strong&gt; bytes long. Because every program header is the same size, and because they all follow the first one (of which we know the offset), we can traverse through them pretty easily.&lt;/p&gt;
&lt;p&gt;Notable fields in every program header include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;P_TYPE&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the type of segment that this header describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;P_OFFSET&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the offset from the beginning of the file to the &lt;em&gt;segment&lt;/em&gt; that this header describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;P_FILESZ&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the size of the segment that this header describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;P_FLAGS&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;segment-specific flags that provide additional information about the segment that this header describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;sections--section-headers&#34;&gt;Sections &amp;amp; Section headers&lt;/h2&gt;
&lt;p&gt;Every one of the aforementioned segments consists of one or more &lt;em&gt;sections&lt;/em&gt;, each of which is associated with a &lt;em&gt;section header&lt;/em&gt; that describes it.&lt;/p&gt;
&lt;p&gt;The first section header is found at offset &lt;strong&gt;&lt;code&gt;E_SHOFF&lt;/code&gt;&lt;/strong&gt;, and is &lt;strong&gt;&lt;code&gt;E_SHENTSIZE&lt;/code&gt;&lt;/strong&gt; bytes long. It is always &amp;ldquo;empty&amp;rdquo; - its &lt;code&gt;SH_TYPE&lt;/code&gt; is 0x0 (i.e. &lt;code&gt;SHT_NULL&lt;/code&gt;) and it doesn&amp;rsquo;t point to any section.&lt;/p&gt;
&lt;p&gt;There are &lt;strong&gt;&lt;code&gt;E_SHNUM&lt;/code&gt;&lt;/strong&gt; section headers, from which we can conduct that there are also &lt;strong&gt;&lt;code&gt;E_SHNUM&lt;/code&gt;&lt;/strong&gt; sections.&lt;/p&gt;
&lt;p&gt;Notable fields in every section header include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_NAME&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;an offset to a null-terminated string in the &lt;strong&gt;&lt;code&gt;.shstrtab&lt;/code&gt;&lt;/strong&gt; section denoting the section&amp;rsquo;s name&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;.shstrtab&lt;/code&gt;&lt;/strong&gt; is a special section (that has its own section header, like any other) that contains null terminating strings describing the names of all other sections&lt;/li&gt;
&lt;li&gt;programs can use the &lt;code&gt;EI_SHSTRNDX&lt;/code&gt; (the integer index of the &lt;code&gt;.shstrndx&lt;/code&gt; section, where 0 &amp;lt; &lt;code&gt;EI_SHSTRNDX&lt;/code&gt; &amp;lt; (&lt;code&gt;EI_SHNUM&lt;/code&gt; - 1) ) field in the file header to easily seek to this section&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_TYPE&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the type of the section that this headers describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_FLAGS&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;addtional attributes about the section&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_OFFSET&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the offset from the beginning of the file to the section that this header describes&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_SIZE&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;the size of this section&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_ENTSIZE&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;size of each entry in this section, for sections that have dynamic entries, otherwise &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;for example, this field is set to &lt;code&gt;0&lt;/code&gt; in the header that describes the &lt;code&gt;.shstrab&lt;/code&gt; section as it contains null-terminating strings of varying lengths&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SH_LINK&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;section index of an associated section (its use depends on the type of section that this header describes)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Famous examples of &lt;em&gt;sections&lt;/em&gt; include &lt;strong&gt;.text&lt;/strong&gt; (actual executable instructions), &lt;strong&gt;.data&lt;/strong&gt;, &lt;strong&gt;.rodata&lt;/strong&gt; (read-only data), &lt;strong&gt;.symtab&lt;/strong&gt; (the symbol table) and others. There may also exist platform-specific sections, for example a really cool one produced by binutils&#39; &lt;code&gt;ld&lt;/code&gt; linker, &lt;code&gt;.note.gnu.build-id&lt;/code&gt;, which is a sha1/md5 hash of the output file. Or &lt;code&gt;.comment&lt;/code&gt;, which includes the version of the GCC stack that was used to build the ELF.&lt;/p&gt;
&lt;h2 id=&#34;tools-and-references&#34;&gt;Tools and references&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;the best tools to use for interacting with ELF files are &lt;code&gt;readelf&lt;/code&gt;, &lt;code&gt;objdump&lt;/code&gt;, and &lt;code&gt;size&lt;/code&gt;. They are all part of GNU&amp;rsquo;s &lt;a href=&#34;https://www.gnu.org/software/binutils/&#34;&gt;&lt;code&gt;binutils&lt;/code&gt;&lt;/a&gt; so you most likely already have them installed.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sco.com/developers/gabi/latest/contents.html&#34;&gt;SysV ABI Specification DRAFT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/tagged/elf&#34;&gt;ELF tag on StackOverflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Executable_and_Linkable_Format&#34;&gt;Executable and Linkable Format - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/eliben/pyelftools&#34;&gt;&lt;code&gt;pyelftools&lt;/code&gt; on GitHub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
</description>
    </item>
    
    <item>
      <title>Type Conversion and Declarations in C</title>
      <link>https://bool3max.github.io/posts/c_tc_and_decl/</link>
      <pubDate>Wed, 14 Nov 2018 18:05:02 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/c_tc_and_decl/</guid>
      <description>&lt;p&gt;This document explains the rules of type conversion, declarations, as well as object properties described in the C standard. It is not meant to be read as a tutorial, but rather as a quick reference.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;type-conversion&#34;&gt;Type Conversion&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Implicit conversion&lt;/strong&gt; - any type conversion done by the compiler, which does not involve casting (e.g. assignment conversion, or usual arithmetic conversion &amp;ndash; conversion done upon non-equivalent types of operands with binary operators, or perhaps mismatch return type from a function or a function parameter/argument) &amp;ndash; &lt;strong&gt;RULES:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;integer ranks&lt;/strong&gt; (excluding extended and enumerated types):
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;long long int, unsigned long long int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;long int, unsigned long int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int, unsigned int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;short int, unsigned short int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;char, singed char, unsigned char&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_Bool&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;integer promotion&lt;/strong&gt;: convert any type whose rank is less than &lt;code&gt;int&lt;/code&gt; or &lt;code&gt;unsigned int&lt;/code&gt; to &lt;code&gt;int&lt;/code&gt; (provided it can fit) or else &lt;code&gt;unsigned int&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Usual arithmetic conversions&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;either operand is floating type&lt;/em&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;float -&amp;gt; double -&amp;gt; long double&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;convert the other operand to the same floating type&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;em&gt;neither operand is a floating type&lt;/em&gt;:
&lt;ul&gt;
&lt;li&gt;First, perform integer promotion on both operands&lt;/li&gt;
&lt;li&gt;If types of both operands are now the same, &lt;strong&gt;the process ends, if not&lt;/strong&gt;, perform the following rules, and stop at the first one that applies
&lt;ol&gt;
&lt;li&gt;If both operands have &lt;code&gt;signed&lt;/code&gt; types or if both operands have &lt;code&gt;unsigned&lt;/code&gt; types, convert the operand whose type rank is lower to the type of the operand whose type rank is higher&lt;/li&gt;
&lt;li&gt;If the operand with the unsigned type has a rank HIGHER or EQUAL to the rank of the signed operand, convert the operand with the singed type to the type of the operand with the unsigned type&lt;/li&gt;
&lt;li&gt;If the operand with the signed type can represent all of the values of the type with the unsigned operand, convert the unsigned operand to the type of the signed operand&lt;/li&gt;
&lt;li&gt;If none of the above rules apply, convert BOTH operands to the &lt;code&gt;unsigned&lt;/code&gt; &amp;ldquo;version&amp;rdquo; of the type of the signed operand&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Assignment conversion&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;The usual arithmetic conversion rules do not apply here. In assignment conversion, the value of the expression on the right is simply converted to the type of the object on the left. An overflow can happen if the value of the expression on the right is too large to be represented using the type of the object on the left. (&lt;em&gt;side&lt;/em&gt; here represents the left/rights sides of the &lt;code&gt;=&lt;/code&gt; operator)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Explicit conversion&lt;/strong&gt; - type conversion done using casts&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;declarations&#34;&gt;Declarations&lt;/h2&gt;
&lt;p&gt;Before we begin, we have to understand that every object in C has &lt;strong&gt;3&lt;/strong&gt; properties. These are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Storage duration&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;It determines when the memory for the object is allocted, and when it is realeased/freed.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Storage for objects with &lt;strong&gt;automatic storage duration&lt;/strong&gt; is allocated when the block containing the object is entered, and it is deallocated when the block containing the object is terminated.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;An object with &lt;strong&gt;static storage duration&lt;/strong&gt; stays at the same storage duration as long as the program is running, allowing it to keep its value indefinitely. All objects declared with static storage duration and without an explicit initializer are &lt;strong&gt;zeroed-out&lt;/strong&gt; (be that inside a block using &lt;code&gt;static&lt;/code&gt;, or at file scope without a storage class)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Scope&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;The scope of the object determines the portion of the program from which the object can be referenced.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Block scope&lt;/strong&gt;: The object is &amp;ldquo;visible&amp;rdquo; from its point of declaration up until the end of the enclosing block.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;File scope&lt;/strong&gt;: The object is &amp;ldquo;visible&amp;rdquo; from its point of declaration up until the end of the enclosing file.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Linkeage&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;The linkeage of an object determines to which extent it can be shared among the different &amp;ldquo;files&amp;rdquo; (compilation units) in a program.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;External linkage&lt;/strong&gt;: An object with &lt;em&gt;external linkage&lt;/em&gt; may be shared with multiple files in a program (perhaps all?)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Internal linkage&lt;/strong&gt;: An object with &lt;em&gt;internal linkage&lt;/em&gt; is limited to the file in which it is declared and can not be shared with multiple files in a program.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;No linkage&lt;/strong&gt;: An object with no linkage cannot be shared at all, and is only visible inside of the function in which it is declared.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;default-properties&#34;&gt;&lt;strong&gt;Default properties&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;The default properties of objects depend on the location in which they were declared.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;objects declared &lt;em&gt;&lt;strong&gt;inside a block&lt;/strong&gt;&lt;/em&gt; (including a function body):
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;automatic storage duration&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;block scope&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;no linkage&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;objects declared &lt;em&gt;&lt;strong&gt;outside any block&lt;/strong&gt;&lt;/em&gt; (the root of the file):
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;static storage duration&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;file scope&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;external linkage&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;syntax&#34;&gt;&lt;strong&gt;Syntax&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;In &lt;strong&gt;C&lt;/strong&gt;, declarations have the following general syntax:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;declaration-specifiers declarators_and_initializers ;&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Declaration specifiers&lt;/strong&gt; describe the properties of the objects/functions being declared, while &lt;strong&gt;declarators&lt;/strong&gt; give them names and provide some additional properties.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Declaration specifiers&lt;/strong&gt;&lt;/em&gt; (4 categories):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Storage classes&lt;/strong&gt;: There are (4) of them: &lt;code&gt;auto, static, extern, register&lt;/code&gt;. At most one can be present in a declaration, and if so, it should come first.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type qualifiers&lt;/strong&gt;: There are (3) of them: &lt;code&gt;const, volatile, restrict&lt;/code&gt;. A declaration may contain zero or more type qualifiers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Type specifiers&lt;/strong&gt;: &lt;code&gt;void, char, short, int, long, float, double, signed, unsigned&lt;/code&gt;. They may be combined, and the order in which they appear doesn&amp;rsquo;t matter. They also include specifications of &lt;code&gt;structs, unions, and enums&lt;/code&gt;, and names created using &lt;code&gt;typedef&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Function specifier&lt;/strong&gt; (C99 only): &lt;code&gt;inline&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;I won&amp;rsquo;t cover each category of declaration-specifiers separately as it would be too much. Each category and keyword is described thoroughly in &lt;em&gt;Chapter 18&lt;/em&gt; (K.N. King. C).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Declarators&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;They provide the declarations with identifying names, along with additional type information (&lt;code&gt;*, [], etc...&lt;/code&gt; for for pointers and array types).&lt;/li&gt;
&lt;li&gt;They may be accompanied by initializers.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;union, struct, and enum&lt;/code&gt; declarations can omit the declarators, in which case they declare just the tag and/or enum constant (as an either complete or incomplete type)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>The 0xFFFFFFFF problem</title>
      <link>https://bool3max.github.io/posts/int_problem/</link>
      <pubDate>Thu, 13 Sep 2018 02:51:42 +0200</pubDate>
      
      <guid>https://bool3max.github.io/posts/int_problem/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;This is a pretty old document that I wrote for myself back when I was first learning C, but the explanation is pretty good so I published it here for future reference. I hope to soon push a reference document that explains some tricky concepts and things from the C standard that are not so easy to remember off the top of the head (such as type conversion, declarations, storage durations, scopes, etc&amp;hellip;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;For future reference, always refer to the latest C standard as it has answers to many questions of the same nature such as this one. The C11 draft can be found &lt;a href=&#34;https://port70.net/~nsz/c/c11/n1570.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Recently, I posted &lt;a href=&#34;https://stackoverflow.com/questions/51160300/why-do-c-compilers-not-warn-when-assigning-integer-value-too-high-for-signed-typ?noredirect=1#comment89304841_51160300&#34;&gt;this question to StackOverflow&lt;/a&gt; about the following program:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0xFFFFFFFF&lt;/span&gt;;
    printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%d&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;, n); &lt;span style=&#34;color:#75715e&#34;&gt;//was originaly %u
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this explanation, I will disregard the fact that I used the wrong conversion specifier in my &lt;code&gt;printf&lt;/code&gt; call (used &lt;code&gt;%u&lt;/code&gt; instead of &lt;code&gt;%d&lt;/code&gt;), thus I will replace it with the correct one, and will come back to the topic of &lt;code&gt;%u&lt;/code&gt; later on in the explanation.&lt;/p&gt;
&lt;p&gt;So, what exactly is happening here? Initially, I was confused as to why this program&amp;rsquo;s output was &lt;code&gt;-1&lt;/code&gt; (at least on a linux/gcc 64bit platform).&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s break the &amp;ldquo;problem&amp;rdquo; down into pieces and analyze each statement and operand separately:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The hexadecimal constant &lt;code&gt;0xFFFFFFFF&lt;/code&gt;, is in decimal form equal to &lt;code&gt;2 ^ 32 - 1&lt;/code&gt;, or &lt;code&gt;4294967295&lt;/code&gt;, and in binary form, equal to &lt;code&gt;11111111111111111111111111111111&lt;/code&gt;. By the compiler, &lt;strong&gt;it is treated as an &lt;em&gt;unsigned integer&lt;/em&gt;&lt;/strong&gt;, and not as a series of bits. Yes, it can be represented as a series of 32 bits &lt;em&gt;(all 1&amp;rsquo;s)&lt;/em&gt;, but to the compiler that is apparently irrelevant. In C99, hexadecimal and octal constants are tested in the following order:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;int&lt;/li&gt;
&lt;li&gt;unsigned int&lt;/li&gt;
&lt;li&gt;long int&lt;/li&gt;
&lt;li&gt;unsigned long int&lt;/li&gt;
&lt;li&gt;long long int&lt;/li&gt;
&lt;li&gt;unsigned long long int&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first type that is large enough to accomodate the size of the constant is the one that the compiler will use to identify it.
In this case, &lt;code&gt;0xFFFFFFFF&lt;/code&gt; is too large to fit in the first contender (&lt;code&gt;int&lt;/code&gt;, or rather &lt;code&gt;signed int&lt;/code&gt;), but is just the right size to be treated as an &lt;code&gt;unsigned int&lt;/code&gt;, and thus the compiler treats it as that.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Next, let&amp;rsquo;s look at the left operand of the &lt;code&gt;=&lt;/code&gt; operator, &lt;code&gt;int&lt;/code&gt;. When used by itself, it is the equivalent of &lt;code&gt;singed int&lt;/code&gt;, and thus I will refer to it as that from now on. The largest positive number that a &lt;code&gt;signed int&lt;/code&gt; can store is equal to &lt;code&gt;2 ^ 31 - 1&lt;/code&gt;, or &lt;code&gt;2147483647&lt;/code&gt; in decimal form, due to the need of being able to represent negative integers, and thus having one less bit to work with.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The types of the operands on both sides of the &lt;code&gt;=&lt;/code&gt; operator &lt;strong&gt;don&amp;rsquo;t match&lt;/strong&gt;. One is a &lt;code&gt;signed int&lt;/code&gt;, the other an &lt;code&gt;unsigned int&lt;/code&gt;. Thus, C has to &lt;em&gt;implicitly&lt;/em&gt; convert the right operant &lt;em&gt;to the type of the left operand&lt;/em&gt;. (in assignment, &lt;strong&gt;the right operand always has to abide by the type of the left one&lt;/strong&gt;). The result of this conversion isn&amp;rsquo;t specified in the C standard, and is therefore implemenation defined.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Per my current understanding, the binary representation of &lt;code&gt;0xFFFFFFFF&lt;/code&gt;, or rather &lt;code&gt;0b11111111111111111111111111111111&lt;/code&gt; is simply copied into the address of our &lt;code&gt;signed int n&lt;/code&gt; varible. Since the variable is a &lt;code&gt;signed integer&lt;/code&gt;, it utilizes &lt;strong&gt;2&amp;rsquo;s complement&lt;/strong&gt;. In 2&amp;rsquo;s complement, a binary representation of &lt;strong&gt;all 1s&lt;/strong&gt; is always equal to &lt;em&gt;&lt;strong&gt;-1&lt;/strong&gt;&lt;/em&gt; in decimal form, and therefore &lt;em&gt;&lt;strong&gt;that is the output of our printf() call&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Why are all 1s always equal to -1 (decimal) in 2&amp;rsquo;s complement? Let&amp;rsquo;s look at the following example using an 8bit number (although the same rules apply for any other number of bits, &lt;em&gt;including 32&lt;/em&gt;):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;in a regular unsigned system, 1 (decimal) is equal to &lt;code&gt;0b00000001&lt;/code&gt; in binary. Very obvious.&lt;/li&gt;
&lt;li&gt;Let&amp;rsquo;s get the negative value of this number (-1) using the 2s complement operation:
&lt;ul&gt;
&lt;li&gt;first we invert the bits: &lt;code&gt;0b00000001&lt;/code&gt; -&amp;gt; &lt;code&gt;0b11111110&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;then we add 1        : &lt;code&gt;0b11111110&lt;/code&gt; -&amp;gt; &lt;code&gt;0b11111111&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Upon completion of the 2s complement operation, we ended up with a binary representation of the negative version of our original number (-1)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;As you can see, we&amp;rsquo;ve ended up with the number -1 (decimal), that is in binary equal to all 1s (all bits). The same is true when the operation is applied to a number consisting of any number of bits.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;the-u-problem&#34;&gt;The &lt;code&gt;%u&lt;/code&gt; problem&lt;/h2&gt;
&lt;p&gt;As I said, in my original question I (for some unknown reason?) substituted the &lt;code&gt;%d&lt;/code&gt; conversion specifier with the &lt;code&gt;%u&lt;/code&gt; conversion specifier, resulting in the following statement:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%u&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;, n);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This statement prints out &lt;code&gt;4294967295&lt;/code&gt;. Why? Let&amp;rsquo;s find out:&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;%u&lt;/code&gt; conversion expects an unsigned integer as the argument. We&amp;rsquo;ve, however, supplied it a &lt;em&gt;singed&lt;/em&gt; integer. However, this time there is no conversion, as the conversion from &lt;code&gt;int&lt;/code&gt; to &lt;code&gt;unsigned int&lt;/code&gt; is impossible, nonexistent, and therefore the behaviour is undefined.&lt;/p&gt;
&lt;p&gt;In the case of GCC, &lt;code&gt;%u&lt;/code&gt; (or rather, &lt;code&gt;printf&lt;/code&gt;) &lt;em&gt;assumes&lt;/em&gt; that the value passed to it is of the correct type (&lt;code&gt;uint&lt;/code&gt; in this case), and prints its value accordingly. &lt;code&gt;0xFFFFFFFF&lt;/code&gt; in an unsigned system has the decimal value &lt;em&gt;4294967295&lt;/em&gt;, which is then simply printed.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Briefly explaining Python3 Decorators</title>
      <link>https://bool3max.github.io/posts/python_decorators_explained/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://bool3max.github.io/posts/python_decorators_explained/</guid>
      <description>&lt;p&gt;Decorators are a way to modify behavior of functions using other functions.&lt;/p&gt;
&lt;p&gt;Take a look at the following routine:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(x, y):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Say we wanted to alter this function so that it would always return a result by 1 larger than the sum. We can write a decorator for that:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;increment&lt;/span&gt;(func):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;add_one&lt;/span&gt;(x, y):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; func(x, y) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; add_one

&lt;span style=&#34;color:#a6e22e&#34;&gt;@increment&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(x, y):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; sum(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Under the hood, &lt;code&gt;sum&lt;/code&gt; becomes &lt;code&gt;increment(sum)&lt;/code&gt;, i.e. &lt;strong&gt;&lt;code&gt;sum = increment(sum)&lt;/code&gt;&lt;/strong&gt;. The function is modified, i.e. &lt;em&gt;&lt;strong&gt;decorated&lt;/strong&gt;&lt;/em&gt; by a new function returned by the decorator applied to it, which is why return values of decorators always have to be &lt;em&gt;&lt;strong&gt;callable&lt;/strong&gt;&lt;/em&gt; (i.e. - functions - though any object that implements the &lt;strong&gt;&lt;code&gt;__call__&lt;/code&gt;&lt;/strong&gt; method is considered callabe).&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s pretty much all there is to decorators.&lt;/p&gt;
&lt;p&gt;This can be a little confusing, so to recap what is happening here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The reference to our original &lt;strong&gt;&lt;code&gt;sum&lt;/code&gt;&lt;/strong&gt; function is passed into its decorator, &lt;strong&gt;&lt;code&gt;increment&lt;/code&gt;&lt;/strong&gt;, and it is called&lt;/li&gt;
&lt;li&gt;From within it we construct a new inner function (&lt;strong&gt;&lt;code&gt;add_one&lt;/code&gt;&lt;/strong&gt;), which is returned, and our original function is overwritten by it
&lt;ul&gt;
&lt;li&gt;from within this function we call our original &lt;strong&gt;&lt;code&gt;sum&lt;/code&gt;&lt;/strong&gt; function - passing in any arguments (we have a reference to it!), adding one to its return value and returning it&lt;/li&gt;
&lt;li&gt;this function has to take in the same number of arguments as the original function, because we intend to call our original function from within this new one&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;another-example&#34;&gt;Another example&lt;/h2&gt;
&lt;p&gt;Knowing all this, we can, as an example, create a decorator that simply completely overwrites the result of any function it decorates.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overwrite&lt;/span&gt;(f):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OVERWRITTEN&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;@overwrite&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;some_complex_routine&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;args):
    &lt;span style=&#34;color:#75715e&#34;&gt;# lots of complex logic here...&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;some complex result&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; some_complex_routine()
&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OVERWRITTEN&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here I use the &lt;a href=&#34;https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions&#34;&gt;lambda notation&lt;/a&gt; to create and return a simple function using a one-liner.&lt;/p&gt;
&lt;p&gt;It is the equivalent of writing this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;overwrite&lt;/span&gt;(f):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;inner&lt;/span&gt;():
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;OVERWRITTEN&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;chaining-multiple-decorators&#34;&gt;Chaining multiple decorators&lt;/h2&gt;
&lt;p&gt;Decorating a single function using multiple decorators is possible, and the decorators are applied &amp;ldquo;from the bottom up&amp;rdquo; - i.e. the decorator &amp;ldquo;closest to&amp;rdquo; the function declaration is the one that gets applied first:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;plusone&lt;/span&gt;(func):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;addone&lt;/span&gt;(x, y):
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; func(x, y) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;

    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; addone

&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;divtwo&lt;/span&gt;(func):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; a, b: func(a, b) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;@plusone&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;@divtwo&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(x, y):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (x &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; y)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; sum(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
&lt;span style=&#34;color:#ae81ff&#34;&gt;5.5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;By observing the result we can see that first &lt;strong&gt;&lt;code&gt;5 + 4&lt;/code&gt;&lt;/strong&gt; was divided by two, and then one was added to result.&lt;/p&gt;
&lt;h2 id=&#34;decorators-with-parameters&#34;&gt;Decorators with parameters&lt;/h2&gt;
&lt;p&gt;Unfortunately it isn&amp;rsquo;t as simple as making the decorator function accept additional arguments, and I was quite bummed to find that out.&lt;/p&gt;
&lt;p&gt;Instead, a decorator with a parameter should actually be a function that takes an argument and returns a function which in turn returns another function. In other words, we have to call a function with a parameter that will then return a decorator function (built upon that paramater). Confusing (and I still don&amp;rsquo;t understand why, however there is probably a good exaplanation for it), so let&amp;rsquo;s rewrite the &lt;strong&gt;&lt;code&gt;divtwo&lt;/code&gt;&lt;/strong&gt; decorator so that it accepts the number to divide by as an argument:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;divby&lt;/span&gt;(n):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;decorator&lt;/span&gt;(func): 
        &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;inner&lt;/span&gt;(a, b):
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; func(a, b) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; n
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inner
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; decorator

&lt;span style=&#34;color:#a6e22e&#34;&gt;@divby&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(x, y):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (x &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; y)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; sum(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
&lt;span style=&#34;color:#ae81ff&#34;&gt;3.0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now the decorator has an argument which we can control on a per-function basis.&lt;/p&gt;
&lt;p&gt;Since our decorator routine consists of simple one-liner statements we can rewrite it entirely using lambdas, however I personally think that, while more concise, it is less readable:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;divby&lt;/span&gt;(n):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; func: &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; a, b: func(a, b) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;decorating-functions-regardless-of-their-arguments&#34;&gt;Decorating functions regardless of their arguments&lt;/h2&gt;
&lt;p&gt;The decorators I&amp;rsquo;ve written so far all assume that the decorated function accepts 2 arguments, and as such only works on those. We can fix this by using the familiar &lt;strong&gt;&lt;code&gt;*args, **kwargs&lt;/code&gt;&lt;/strong&gt; notation:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;divby&lt;/span&gt;(n):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;decorator&lt;/span&gt;(func): 
        &lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;inner&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;args, &lt;span style=&#34;color:#f92672&#34;&gt;**&lt;/span&gt;kwargs):
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; func(&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;args, &lt;span style=&#34;color:#f92672&#34;&gt;**&lt;/span&gt;kwargs) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; n
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; inner
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; decorator
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
  </channel>
</rss>